<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>사주 결과</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <div class="card">
            <h1>사주 결과</h1>
            <div class="result">
                <h2>사주:</h2>
                <ul>
                    {% for key, value in saju.items() %}
                    <li><strong>{{ key }}:</strong> {{ value[0] }}{{ value[1] }}</li>
                    {% endfor %}
                </ul>
                
                <h2>분석:</h2>
                <pre>{{ analysis }}</pre>

                <h2>상세 보고서:</h2>
                <pre>{{ report }}</pre>
            </div>

            <!-- 오행 강약 차트 추가 -->
            <div class="chart-container" style="position: relative; height:40vh; width:80vw">
                <canvas id="wuxingChart"></canvas>
            </div>

            <a href="/" class="button">다시 계산하기</a>
        </div>
    </div>

    <!-- Chart.js 라이브러리 추가 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        // 예시 오행 강약 데이터 (서버에서 계산된 값을 이 변수로 전달)
        const wuxingStrength = {
            '목': 3,  // 예: 목의 강도
            '화': 4,
            '토': 2,
            '금': 5,
            '수': 1
        };

        // 차트를 그릴 캔버스 컨텍스트 가져오기
        const ctx = document.getElementById('wuxingChart').getContext('2d');
        const data = {
            labels: ['목', '화', '토', '금', '수'],  // 오행 항목
            datasets: [{
                label: '오행의 강약',
                data: Object.values(wuxingStrength),  // 오행 강약 데이터
                backgroundColor: ['#4CAF50', '#FF5722', '#FFC107', '#9E9E9E', '#2196F3'],
                borderColor: '#333',
                borderWidth: 1
            }]
        };

        const config = {
            type: 'radar',  // 레이다 차트 타입
            data: data,
            options: {
                scales: {
                    r: {
                        beginAtZero: true
                    }
                }
            }
        };

        // 차트 생성
        const wuxingChart = new Chart(ctx, config);
    </script>
</body>
</html>
